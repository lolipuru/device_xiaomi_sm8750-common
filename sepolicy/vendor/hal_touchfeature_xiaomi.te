type hal_touchfeature_xiaomi_default, domain;
type hal_touchfeature_xiaomi_default_exec, exec_type, file_type, vendor_file_type;

type hal_touchfeature_xiaomi_service, hal_service_type, protected_service, service_manager_type;

allow hal_touchfeature_xiaomi_default vendor_touchfeature_prop:file { getattr open read };
allow hal_touchfeature_xiaomi_default proc_tp_file:file { open read write };
allow hal_touchfeature_xiaomi_default self:capability sys_nice;
allow hal_touchfeature_xiaomi_default sysfs_touch_hostprocess:file { open read write };
allow hal_touchfeature_xiaomi_default touchfeature_device:chr_file { ioctl map open read write };
allow hal_touchfeature_xiaomi_default input_device:dir { read open search };
allow hal_touchfeature_xiaomi_default input_device:chr_file rw_file_perms;

add_service(hal_touchfeature_xiaomi_server, hal_touchfeature_xiaomi_service)

binder_call(hal_touchfeature_xiaomi_default, servicemanager)

hal_server_domain(hal_touchfeature_xiaomi_default, hal_touchfeature_xiaomi)

init_daemon_domain(hal_touchfeature_xiaomi_default)

get_prop(hal_touchfeature_xiaomi_default, vendor_touchfeature_prop)
get_prop(hal_touchfeature_xiaomi_default, vendor_touch_hostprocess_prop)
set_prop(hal_touchfeature_xiaomi_default, vendor_touchfeature_prop)
set_prop(hal_touchfeature_xiaomi_default, vendor_touch_hostprocess_prop)

vndbinder_use(hal_touchfeature_xiaomi)